---
id: websocket
title: "WebSocket 流式语音"
description: "用于双向流式语音交互的 WebSocket 连接，该连接支持多路复用，因此您可以并行发送多个请求并接收相应的响应。"
sidebar_label: "WebSocket 流式语音"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "wss api-method"
info_path: api/speech/tts
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"WebSocket 流式语音"}
>
</Heading>

<MethodEndpoint
  method={"wss"}
  path={"/v1/audio/speech"}
  context={"endpoint"}
>
  
</MethodEndpoint>



用于双向流式语音交互的 WebSocket 连接，该连接支持多路复用，因此您可以并行发送多个请求并接收相应的响应。

WebSocket API是围绕上下文构建的：

1. 当您发送生成请求时，您传递一个 `context_id`。对同一 `context_id` 的进一步输入将继续生成，保持韵律。

2. 上下文的响应包含您传递的 `context_id`，以便您可以匹配请求和响应。

阅读有关使用[上下文的指南](/guides/contexts)以了解更多信息。


:::danger

为保证整体服务，WebSocket 在连接空闲 5 分钟后自动关闭。维持长连接的方法，定期发送请求保持连接活跃。

:::


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"model_id":{"title":"语音合成模型","description":"选择用于合成的 TTS 模型","example":"emotion-tts-v1","type":"string","enum":["emotion-tts-v1"]},"transcript":{"type":"string","title":"要合成语音的文字","description":"需要合成的文本","example":"你好，欢迎使用语音合成服务。"},"voice":{"description":"语音参数","properties":{"mode":{"type":"string","title":"Mode","description":"语音模式，`id`","example":"id"},"id":{"type":"string","title":"Id","description":"语音的唯一 ID","example":"zh_male_haoran"},"required":["mode","id"]},"type":"object","required":["mode"],"title":"VoiceModel"},"output_format":{"description":"输出格式参数，MP3","properties":{"container":{"type":"string","title":"Container","description":"音频格式，支持 `wav`，`mp3` 或 `raw`。","example":"wav"},"sample_rate":{"type":"integer","title":"Sample Rate","description":"采样率，支持 `8000`, `16000`, `22050`, `24000`, `32000`, `44100`, `48000`。","example":24000},"encoding":{"type":"string","title":"Encoding","description":"编码类型，可选值：`pcm_s16le`，`pcm_mulaw`，`pcm_alaw`，container 为 `wav`，或 `raw` 必选","example":"pcm_s16le"},"bit_rate":{"type":"integer","title":"Bit Rate","description":"比特率，支持 `8000`，`16000`，`22050`，`24000`，`32000`，`44100`，`48000`，container 为 `mp3` 必选。","example":32000}},"type":"object","required":["container","encoding"],"title":"MP3_Format_Model"},"language":{"type":"string","title":"Language","description":"语言，支持 `zh`、`en`、`jp`、`auto`","example":"zh"},"context_id":{"type":"string","title":"Context Id","description":"上下文 ID，可用于句子间的连续合成","default":"","example":"session-12Te3grseYEsuyt"}},"type":"object","required":["model_id","transcript","voice","output_format","language","context_id"],"title":"Speech_Model","description":"语音合成请求"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"101":{"description":"WebSocket 连接成功，开始实时语音合成数据传输","content":{"application/json":{"schema":{"anyOf":[{"type":"object","description":"chunk","properties":{"type":{"type":"string","example":"chunk"},"status_code":{"type":"integer","example":206},"data":{"type":"string","description":"Base64 编码的语音数据","example":"base64_encoded_speech_data"},"done":{"type":"boolean","example":false},"context_id":{"type":"string","example":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},"required":["type","status_code","data","done","context_id"],"example":{"type":"chunk","status_code":206,"data":"base64_encoded_speech_data","done":false,"context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},{"type":"object","description":"error","properties":{"type":{"type":"string","example":"error"},"status_code":{"type":"integer","example":500},"done":{"type":"boolean","example":true},"error":{"type":"string","example":"语音合成发生错误"},"context_id":{"type":"string","example":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},"required":["type","status_code","done","error","context_id"],"example":{"type":"error","status_code":500,"done":true,"error":"语音合成发生错误","context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},{"type":"object","description":"done","properties":{"type":{"type":"string","example":"done"},"status_code":{"type":"integer","example":200},"done":{"type":"boolean","example":true},"context_id":{"type":"string","example":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},"example":{"type":"done","status_code":200,"done":true,"context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"},"required":["type","status_code","done","context_id"]}]},"examples":{"chunk":{"value":{"type":"chunk","status_code":206,"data":"base64_encoded_speech_data","done":false,"context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},"error":{"value":{"type":"error","status_code":500,"done":true,"error":"语音合成发生错误","context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"}},"done":{"value":{"type":"done","status_code":200,"done":true,"context_id":"09dde5c1-1ac9-4434-9860-b97f9a792072"}}}}}}}}
>
  
</StatusCodes>


      